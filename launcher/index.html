<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Asteroid Impact Simulator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./style.css" />

    <style>
      /* 레이아웃이 이미 있다면 높이 전파가 되도록 최소 보장 */
      html, body { height: 100%; margin: 0; }
      .app { display: flex; height: 100vh; }
      .map-pane { flex: 1 1 75%; }
      .control-pane { flex: 1 1 25%; overflow: auto; }
      /* 실제 구글맵이 렌더링될 컨테이너 */
      #map { width: 100%; height: 100%; }
    </style>

  </head>

  <body>
    <!-- 오른쪽 상단 고정 헤더 -->
    <header class="site-header site-header--top-right" role="navigation" aria-label="Global">
      <nav class="nav nav--right">
        <!-- 현재 페이지에선 aria-current="page"만 해당 링크에 붙여 주세요 -->
        <a class="nav-link" href="../solar-system3D-main/index.html">3D view</a>
        <a class="nav-link" href="./index.html" aria-current="page">simulator</a>
        <a class="nav-link" href="../presentation/slides.html">presentation</a>
      </nav>
    </header>

    <div class="app">
      <!-- 지도 영역 -->
      <section class="map-pane" aria-label="지도">
        <!-- gmp-map은 제거하고, 우리가 제어하는 #map만 사용 -->
        <div id="map"></div>
      </section>

      <!-- 제어 패널 -->
      <aside class="control-pane" aria-label="시뮬레이션 입력">
        <header class="panel-header">
          <h1>Stimulation input</h1>
          <p class="muted"> Enter velocity·size·angle and click “Submit”</p>
        </header>

        <form id="simForm" class="form">
          <!-- 직경 -->
          <div class="field">
            <label for="diameter">size (diameter, m)</label>
            <input type="number" id="diameter" name="diameter" min="83" step="1" placeholder="ex: 919" required />
            <small class="hint">recommend: 83-70000 m (avg. 919) </small>
          </div>

          <!-- 속도 -->
          <div class="field">
            <label for="speed">Velocity (m/s)</label>
            <input type="number" id="speed" name="speed" min="1000" step="1" placeholder="ex: 21000" required />
            <small class="hint">1 km/s = 1000 m/s (avg. 24840 )</small>
          </div>

          <!-- 입사각 -->
          <div class="field">
            <label for="theta">Angle (°)</label>
            <input type="number" id="theta" name="theta" min="5" max="90" step="1" placeholder="ex: 45" required />
            <small class="hint">recommend 45°</small>
          </div>

          <!-- 버튼 -->
          <div class="actions">
            <button type="submit" class="btn primary">Submit</button>
            <button type="button" id="resetBtn" class="btn">Reset</button>
          </div>
        </form>

        <!-- 상태/결과 영역 -->
        <div id="status" class="status" aria-live="polite"></div>
        <div id="result">Click the map to see it's ocean or land</div>
        <div id="results" class="results"></div>
      </aside>
    </div>
        
    <div id="simulation-results"></div>   <!-- 매칭된 PHA 정보와 에너지 출력 -->
    <div id="crater-results"></div>      <!-- 분화구 정보 출력 -->
    <div id="tsunami-results"></div>     <!-- 쓰나미 정보 출력 (해양일 경우) -->


    <!-- JS 로드: 우리의 코드 먼저, 그다음 Maps API (defer + callback) -->
    <!-- (map.js가 꼭 필요하지 않다면 제거 가능) -->
    <script type="module" src="./map.js"></script>
    <script type="module" src="./sim.js"></script>
    <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>


    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBW5al7j3mHmHAa0qLXDDwofkygB9GWLBU&language=en&callback=initMap"
      defer></script>
  </body>
</html>
